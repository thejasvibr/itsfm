

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>measure horseshoe bat call : Documentation &mdash; measure horseshoe bat calls 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Analysing real recordings" href="gallery_dir/plot_segmenting_real_sounds.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> measure horseshoe bat calls
          

          
            
            <img src="_static/measure_CF_calls_logo_v1.0.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="gallery_dir/plot_segmenting_real_sounds.html">Analysing real recordings</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gallery_dir/plot_peak_percentage.html">The peak-percentage method</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gallery_dir/plot_peak_percentage.html#how-does-it-work">How does it work?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gallery_dir/plot_peak_percentage.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gallery_dir/plot_choosing_correct_max_acc.html">Setting the correct <cite>max_acc</cite> value</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gallery_dir/plot_choosing_correct_max_acc.html#an-example-frequency-profile">An example frequency profile</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gallery_dir/plot_pwvd.html">Segmenting CF and FM using the PWVD method</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gallery_dir/plot_pwvd.html#how-does-it-work">How does it work?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gallery_dir/plot_pwvd.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gallery_dir/plot_segmenting_accurately.html">Segmenting real-world sounds correctly with synthetic sounds</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gallery_dir/plot_segmenting_accurately.html#synthetic-calls-to-the-rescue">Synthetic calls to the rescue</a></li>
<li class="toctree-l2"><a class="reference internal" href="gallery_dir/plot_segmenting_accurately.html#generating-a-classical-cf-fm-bat-call">Generating a ‘classical’ CF-FM bat call</a></li>
<li class="toctree-l2"><a class="reference internal" href="gallery_dir/plot_segmenting_accurately.html#a-multi-component-bird-call">A multi-component bird call</a></li>
<li class="toctree-l2"><a class="reference internal" href="gallery_dir/plot_segmenting_accurately.html#let-there-be-noise">Let there be Noise</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gallery_dir/plot_custom_measurements.html">Inbuilt and custom measurements on CF and FM segments</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">measure horseshoe bat calls</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>measure horseshoe bat call : Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="measure-horseshoe-bat-call-documentation">
<h1>measure horseshoe bat call : Documentation<a class="headerlink" href="#measure-horseshoe-bat-call-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="how-the-package-works">
<h2>How the package works<a class="headerlink" href="#how-the-package-works" title="Permalink to this headline">¶</a></h2>
<p>The package assumes that any given sound could have a set of three elements</p>
<ul class="simple">
<li><p>Constant Frequency (CF) :  a pure tone like element</p></li>
<li><p>Frequency Modulated (FM) :  an element with a varying frequency</p></li>
<li><p>Gap : a silence between two elements that is neither a CF nor an FM.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">orphan</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</div>
</div>
<div class="section" id="example-gallery">
<span id="sphx-glr-gallery-dir"></span><h1>Example Gallery<a class="headerlink" href="#example-gallery" title="Permalink to this headline">¶</a></h1>
<p>This page has all the example code and run throughs.</p>
<div class="sphx-glr-thumbcontainer" tooltip="Analysing real recordings"><div class="figure align-default" id="id1">
<img alt="_images/sphx_glr_plot_segmenting_real_sounds_thumb.png" src="_images/sphx_glr_plot_segmenting_real_sounds_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="gallery_dir/plot_segmenting_real_sounds.html#sphx-glr-gallery-dir-plot-segmenting-real-sounds-py"><span class="std std-ref">Analysing real recordings</span></a></span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div><div class="toctree-wrapper compound">
</div>
<div class="sphx-glr-thumbcontainer" tooltip="The peak percentage method works if the constant frequency portion of a sound segment  is the h..."><div class="figure align-default" id="id2">
<img alt="_images/sphx_glr_plot_peak_percentage_thumb.png" src="_images/sphx_glr_plot_peak_percentage_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="gallery_dir/plot_peak_percentage.html#sphx-glr-gallery-dir-plot-peak-percentage-py"><span class="std std-ref">The peak-percentage method</span></a></span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div><div class="toctree-wrapper compound">
</div>
<div class="sphx-glr-thumbcontainer" tooltip="The typical way these spikes are dealt with is to calculate an aboslute frequency  accelaration..."><div class="figure align-default" id="id3">
<img alt="_images/sphx_glr_plot_choosing_correct_max_acc_thumb.png" src="_images/sphx_glr_plot_choosing_correct_max_acc_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="gallery_dir/plot_choosing_correct_max_acc.html#sphx-glr-gallery-dir-plot-choosing-correct-max-acc-py"><span class="std std-ref">Setting the correct max_acc value</span></a></span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div><div class="toctree-wrapper compound">
</div>
<div class="sphx-glr-thumbcontainer" tooltip="How does it work? ~~~~~~~~~~~~~~~~~ The PWVD is made by performing a local auto-correlation at ..."><div class="figure align-default" id="id4">
<img alt="_images/sphx_glr_plot_pwvd_thumb.png" src="_images/sphx_glr_plot_pwvd_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="gallery_dir/plot_pwvd.html#sphx-glr-gallery-dir-plot-pwvd-py"><span class="std std-ref">Segmenting CF and FM using the PWVD method</span></a></span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div><div class="toctree-wrapper compound">
</div>
<div class="sphx-glr-thumbcontainer" tooltip="Just because an output is produced by the package, it doesn&#x27;t  always lead to a meaningful resu..."><div class="figure align-default" id="id5">
<img alt="_images/sphx_glr_plot_segmenting_accurately_thumb.png" src="_images/sphx_glr_plot_segmenting_accurately_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="gallery_dir/plot_segmenting_accurately.html#sphx-glr-gallery-dir-plot-segmenting-accurately-py"><span class="std std-ref">Segmenting real-world sounds correctly with synthetic sounds</span></a></span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div><div class="toctree-wrapper compound">
</div>
<div class="sphx-glr-thumbcontainer" tooltip="Inbuilt and custom measurements on CF and FM segments"><div class="figure align-default" id="id6">
<img alt="_images/sphx_glr_plot_custom_measurements_thumb.png" src="_images/sphx_glr_plot_custom_measurements_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="gallery_dir/plot_custom_measurements.html#sphx-glr-gallery-dir-plot-custom-measurements-py"><span class="std std-ref">Inbuilt and custom measurements on CF and FM segments</span></a></span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div><div class="toctree-wrapper compound">
</div>
<div class="sphx-glr-clear"></div><div class="sphx-glr-footer class sphx-glr-footer-gallery docutils container">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="_downloads/1d298de3173d846396b1943a404b9b4d/gallery_dir_python.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">all</span> <span class="pre">examples</span> <span class="pre">in</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">gallery_dir_python.zip</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="_downloads/aa6d964c3f3c996515e03df8551ab007/gallery_dir_jupyter.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">all</span> <span class="pre">examples</span> <span class="pre">in</span> <span class="pre">Jupyter</span> <span class="pre">notebooks:</span> <span class="pre">gallery_dir_jupyter.zip</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
<p>Any input audio goes through the following steps:</p>
<ol class="arabic simple">
<li><p>Time frequency localisation within audio: either one of Pseudo Wigner-Ville, instantaneous frequency</p></li>
<li><p>FM rate calculation : regions with modulation below the set limit are considered CF, and those above the FM rate are considered FM.</p></li>
<li><p>Rough candidate region assignment into CF and FM regions</p></li>
<li><p>Refined sample-level assignment into CF,FM and Gap regions based on user-input constraints (max number of elements, presence/absence of gaps, etc)</p></li>
<li><p>Segmentation of assigned elements and measurements of various parameters (peak frequency, energy, duration,…)</p></li>
</ol>
<div class="section" id="high-level-api">
<h2>High-level API<a class="headerlink" href="#high-level-api" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="batch-processing-from-batchfiles">
<h2>Batch processing from batchfiles<a class="headerlink" href="#batch-processing-from-batchfiles" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="call-background-and-call-part-segmentation">
<h2>Call -background and call-part segmentation<a class="headerlink" href="#call-background-and-call-part-segmentation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-measure_horseshoe_bat_calls.measurement_functions">
<span id="call-background-and-call-part-segmentation-part-2"></span><h2>Call background and call-part segmentation: part 2<a class="headerlink" href="#module-measure_horseshoe_bat_calls.measurement_functions" title="Permalink to this headline">¶</a></h2>
<p>This is a set of <em>measurement functions</em> which are used to measure various
things about a part of an audio.  A <em>measurement function</em> is a specific kind of</p>
<blockquote>
<div><p>function which accepts three arguments and outputs a dictionary.</p>
</div></blockquote>
<div class="section" id="what-is-a-measurement-function">
<h3>What is a <em>measurement function</em>:<a class="headerlink" href="#what-is-a-measurement-function" title="Permalink to this headline">¶</a></h3>
<p>A <em>measurement function</em> is a specific kind of function which accepts three arguments and outputs a dictionary.
User-defined functions can be used to perform custom measurements on the segment of interest.</p>
<div class="section" id="measurement-function-parameters">
<h4>Measurement function parameters<a class="headerlink" href="#measurement-function-parameters" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li><p>the full audio, a np.array</p></li>
<li><p>the sampling rate, a float&gt;0</p></li>
<li><p>the <cite>segment</cite>, a slice object which defines the span
of the segment. For instance (‘fm1’, slice(0,100))</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="what-needs-to-be-returned">
<h4>What needs to be returned:<a class="headerlink" href="#what-needs-to-be-returned" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>A measurement function must return a dictionary with &gt;1 keys that are strings
and items that can be easily incorporated into a Pandas DataFrame and viewed on
a csv file with ease. Ideal item types include strings, floats, or tuples.</p>
<p>See the source code of the built-in measurement functions below for an example of
how to satisfy the measurement function pattern.</p>
</div></blockquote>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Remember to name the output of the measurement function properly.
If the output key of one measurement function is the same as the
other, it will get overwritten in the final dictionary!</p>
</div>
<dl class="function">
<dt id="measure_horseshoe_bat_calls.measurement_functions.measure_rms">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measurement_functions.</code><code class="sig-name descname">measure_rms</code><span class="sig-paren">(</span><em class="sig-param">audio</em>, <em class="sig-param">fs</em>, <em class="sig-param">segment</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measurement_functions.html#measure_rms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measurement_functions.measure_rms" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">measure_horseshoe_bat_calls.signal_processing.rms()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measurement_functions.measure_peak_amplitude">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measurement_functions.</code><code class="sig-name descname">measure_peak_amplitude</code><span class="sig-paren">(</span><em class="sig-param">audio</em>, <em class="sig-param">fs</em>, <em class="sig-param">segment</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measurement_functions.html#measure_peak_amplitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measurement_functions.measure_peak_amplitude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measurement_functions.start">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measurement_functions.</code><code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param">audio</em>, <em class="sig-param">fs</em>, <em class="sig-param">segment</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measurement_functions.html#start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measurement_functions.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measurement_functions.stop">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measurement_functions.</code><code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param">audio</em>, <em class="sig-param">fs</em>, <em class="sig-param">segment</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measurement_functions.html#stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measurement_functions.stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measurement_functions.duration">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measurement_functions.</code><code class="sig-name descname">duration</code><span class="sig-paren">(</span><em class="sig-param">audio</em>, <em class="sig-param">fs</em>, <em class="sig-param">segment</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measurement_functions.html#duration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measurement_functions.duration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measurement_functions.measure_peak_frequency">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measurement_functions.</code><code class="sig-name descname">measure_peak_frequency</code><span class="sig-paren">(</span><em class="sig-param">audio</em>, <em class="sig-param">fs</em>, <em class="sig-param">segment</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measurement_functions.html#measure_peak_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measurement_functions.measure_peak_frequency" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">measure_horseshoe_bat_calls.signal_processing.get_peak_frequency()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measurement_functions.measure_terminal_frequency">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measurement_functions.</code><code class="sig-name descname">measure_terminal_frequency</code><span class="sig-paren">(</span><em class="sig-param">audio</em>, <em class="sig-param">fs</em>, <em class="sig-param">segment</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measurement_functions.html#measure_terminal_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measurement_functions.measure_terminal_frequency" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">measure_horseshoe_bat_calls.get_terminal_frequency()</span></code></p>
</div>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call">
<span id="call-parts-measurements"></span><h2>Call-parts measurements<a class="headerlink" href="#module-measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call" title="Permalink to this headline">¶</a></h2>
<p>Module that measures each continuous CF and FM segment with either
inbuilt or user-defined functions.</p>
<dl class="function">
<dt id="measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.measure_hbc_call">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.</code><code class="sig-name descname">measure_hbc_call</code><span class="sig-paren">(</span><em class="sig-param">call</em>, <em class="sig-param">fs</em>, <em class="sig-param">cf</em>, <em class="sig-param">fm</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measure_a_horseshoe_bat_call.html#measure_hbc_call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.measure_hbc_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs common or unique measurements on the</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio</strong> (<em>np.array</em>) – </p></li>
<li><p><strong>fs</strong> (<em>float&gt;0.</em>) – Frequency of sampling in Hz.</p></li>
<li><p><strong>cf</strong> (<em>np.array</em>) – Boolean array with True indicating samples that define the CF</p></li>
<li><p><strong>fm</strong> (<em>np.array</em>) – Boolean array with True indicating samples that define the FM</p></li>
<li><p><strong>measurements</strong> (<em>list</em><em>, </em><em>optional</em>) – List with measurement functions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>sound_segments</strong> (<em>dictionary</em>) – Dictionary with keys ‘cf’ and ‘fm’.
There is only one entry for ‘cf’
and upto two entries for ‘fm’.</p></li>
<li><p><strong>measurement_values</strong> (<em>pd.DataFrame</em>) – A wide format dataframe with one row corresponding to all
the measured values for a CF or FM segment</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#module-measure_horseshoe_bat_calls.measurement_functions" title="measure_horseshoe_bat_calls.measurement_functions"><code class="xref py py-func docutils literal notranslate"><span class="pre">measure_horseshoe_bat_calls.measurement_functions()</span></code></a></p>
</div>
<p class="rubric">Example</p>
<p>Create a call with fs and make fake CF and FM segments</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span> <span class="c1"># to ensure the same random numbers are generated</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">call</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">)))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">cf</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the default measurements by not specifying any measurements explicitly.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sound_segments</span><span class="p">,</span> <span class="n">measures</span> <span class="o">=</span> <span class="n">measure_hbc_call</span><span class="p">(</span><span class="n">call</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span>
<span class="go">                                                    cf, fm )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">measures</span><span class="p">)</span>
</pre></div>
</div>
<p>And here’s an example with some custom functions.The default measurements
will appear in addition to the custom measurements.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">measure_horseshoe_bat_calls.measurement_functions</span> <span class="kn">import</span> <span class="n">measure_peak_amplitude</span><span class="p">,</span> <span class="n">peak_frequency</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">custom_measures</span> <span class="o">=</span> <span class="p">[</span><span class="n">peak_frequency</span><span class="p">,</span> <span class="n">measure_peak_amplitude</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sound_segments</span><span class="p">,</span> <span class="n">measures</span> <span class="o">=</span> <span class="n">measure_hbc_call</span><span class="p">(</span><span class="n">call</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span>
<span class="go">                                                    cf, fm,</span>
<span class="go">                                                    measurements=custom_measures)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.parse_cffm_segments">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.</code><code class="sig-name descname">parse_cffm_segments</code><span class="sig-paren">(</span><em class="sig-param">cf</em>, <em class="sig-param">fm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measure_a_horseshoe_bat_call.html#parse_cffm_segments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.parse_cffm_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Recognises continuous stretches of Cf and FM segments,
organises them into separate ‘objects’ and orders them in time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fm</strong> (<em>cf</em><em>,</em>) – Boolean arrays indicating which samples are CF/FM.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cffm_regions_numbered</strong> – Each tuple corresponds to one CF or FM region in the audio.
The tuple has two entries 1) the region identifier, eg. ‘fm1’
and 2) the indices that correspond to the region eg. slice(1,50)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array with tuples.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p># an example sound with two cfs and an fm in the middle</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ordered_regions</span> <span class="o">=</span> <span class="n">parse_cffm_segments</span><span class="p">(</span><span class="n">cf</span><span class="p">,</span> <span class="n">fm</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ordered_regions</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.perform_segment_measurements">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.</code><code class="sig-name descname">perform_segment_measurements</code><span class="sig-paren">(</span><em class="sig-param">full_sound</em>, <em class="sig-param">fs</em>, <em class="sig-param">segment</em>, <em class="sig-param">functions_to_apply</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measure_a_horseshoe_bat_call.html#perform_segment_measurements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.perform_segment_measurements" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs one or more measurements on a specific segment of a full audio
clip.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>full_sound</strong> (<em>np.array</em>) – </p></li>
<li><p><strong>fs</strong> (<em>float&gt;0</em>) – </p></li>
<li><p><strong>segment</strong> (<em>tuple</em>) – First object is a string with the segment’s id, eg. ‘fm1’ or ‘cf2’
Second object is a slice with the indices of the segment, eg. slice(0,100)</p></li>
<li><p><strong>functions_to_apply</strong> (<em>list of functions</em>) – Each function must be a ‘measurement function’. A measurement function
is one that accepts a strict set of inputs. check See Also for more
details.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>results</strong> – A single row with all the measurements results.
The first column is always the ‘regionid’, the rest of the columns
are measurement function dependent.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Here we’ll create a short segment and take the rms and the peak value of
the segment. The <cite>relevant_region</cite> is not an FM region, it is only labelled
so here to show how it works with the rest of the package!</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">909</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">relevant_region</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;fm1&#39;</span><span class="p">,</span><span class="nb">slice</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>
</pre></div>
</div>
<p>The sampling rate  doesn’t matter for the custom functions defined below,
but, it may be important for some other functions.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Hz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">measure_horseshoe_bat_calls.measurement_functions</span> <span class="kn">import</span> <span class="n">measure_rms</span><span class="p">,</span> <span class="n">measure_peak</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">perform_segment_measurements</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span> <span class="n">relevant_region</span><span class="p">,</span>
<span class="go">                                               [measure_rms, measure_peak])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.find_regions">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.</code><code class="sig-name descname">find_regions</code><span class="sig-paren">(</span><em class="sig-param">X</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measure_a_horseshoe_bat_call.html#find_regions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.find_regions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.combine_and_order_regions">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.</code><code class="sig-name descname">combine_and_order_regions</code><span class="sig-paren">(</span><em class="sig-param">cf_slices</em>, <em class="sig-param">fm_slices</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measure_a_horseshoe_bat_call.html#combine_and_order_regions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.combine_and_order_regions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.assign_cffm_regionids">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.</code><code class="sig-name descname">assign_cffm_regionids</code><span class="sig-paren">(</span><em class="sig-param">cffm</em>, <em class="sig-param">cf_regions</em>, <em class="sig-param">fm_regions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measure_a_horseshoe_bat_call.html#assign_cffm_regionids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.assign_cffm_regionids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.common_measurements">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.</code><code class="sig-name descname">common_measurements</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/measure_a_horseshoe_bat_call.html#common_measurements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.measure_a_horseshoe_bat_call.common_measurements" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the default common measurement set
for any region.</p>
</dd></dl>

</div>
<div class="section" id="call-segmentation-and-measurements-visualisation">
<h2>Call segmentation and measurements visualisation<a class="headerlink" href="#call-segmentation-and-measurements-visualisation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-measure_horseshoe_bat_calls.simulate_calls">
<span id="checking-accuracy"></span><h2>Checking accuracy<a class="headerlink" href="#module-measure_horseshoe_bat_calls.simulate_calls" title="Permalink to this headline">¶</a></h2>
<p>The ‘simulate_calls’ module has functions which simulate CF-FM calls
with parameters of choice. Let’s say we want to make a CF-FM call with the
following parameters.</p>
<ul class="simple">
<li><p>CF portion at 100kHz and of 10ms length.</p></li>
<li><p>up FM starting at 80kHz of 2ms</p></li>
<li><p>down FM end at 60kHz of 3ms</p></li>
</ul>
<p>The code snippet below recreates the call with the above parameters</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">measure_horseshoe_bat_calls.view_horseshoebat_call</span> <span class="kn">import</span> <span class="n">visualise_call</span>
<span class="kn">from</span> <span class="nn">measure_horseshoe_bat_calls.simulate_calls</span> <span class="kn">import</span> <span class="n">make_cffm_call</span>

<span class="n">call_parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cf&#39;</span><span class="p">:(</span><span class="mi">100000</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">),</span>
                    <span class="s1">&#39;upfm&#39;</span><span class="p">:(</span><span class="mi">80000</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">),</span>
                    <span class="s1">&#39;downfm&#39;</span><span class="p">:(</span><span class="mi">60000</span><span class="p">,</span> <span class="mf">0.003</span><span class="p">),</span>
                    <span class="p">}</span>

<span class="n">fs</span> <span class="o">=</span> <span class="mi">500</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="mi">3</span> <span class="c1"># 500kHz sampling rate</span>
<span class="n">synthetic_call</span><span class="p">,</span> <span class="n">freq_profile</span> <span class="o">=</span> <span class="n">make_cffm_call</span><span class="p">(</span><span class="n">call_parameters</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>

<span class="c1"># plot</span>
<span class="n">wavef</span><span class="p">,</span> <span class="n">spec</span> <span class="o">=</span> <span class="n">visualise_call</span><span class="p">(</span><span class="n">synthetic_call</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span> <span class="n">fft_size</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="n">spec</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">125000</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ‘make_cffm_call’ makes simulated calls  which match actual bat calls
in all relevant aspects pretty well (temporal+spectral).
However, there are still some issues to be sorted - for example, the
level of the CF portion of the signal is always a little bit lower. If you
have any suggestions for that it’d be great to hear. See <a class="reference internal" href="#measure_horseshoe_bat_calls.simulate_calls.make_cffm_call" title="measure_horseshoe_bat_calls.simulate_calls.make_cffm_call"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_cffm_call()</span></code></a>,
and <a class="reference internal" href="#measure_horseshoe_bat_calls.simulate_calls.make_call_frequency_profile" title="measure_horseshoe_bat_calls.simulate_calls.make_call_frequency_profile"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_call_frequency_profile()</span></code></a>  and <a class="reference internal" href="#measure_horseshoe_bat_calls.simulate_calls.make_FM_with_joint" title="measure_horseshoe_bat_calls.simulate_calls.make_FM_with_joint"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_FM_with_joint()</span></code></a> for more details.</p>
</div>
<dl class="function">
<dt id="measure_horseshoe_bat_calls.simulate_calls.make_cffm_call">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.simulate_calls.</code><code class="sig-name descname">make_cffm_call</code><span class="sig-paren">(</span><em class="sig-param">call_properties</em>, <em class="sig-param">fs</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/simulate_calls.html#make_cffm_call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.simulate_calls.make_cffm_call" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>call_properties</strong> (<em>dictionary</em>) – With keys corresponding to the upto 3 components
cf, upfm, downfm
See make_call_frequency_profile for further info.</p></li>
<li><p><strong>fs</strong> (<em>float&gt;0</em>) – sampling rate in Hz</p></li>
<li><p><strong>poly_order</strong> (<em>int</em><em>, </em><em>optional</em>) – see make_cffm_joint_profile</p></li>
<li><p><strong>joint_duration</strong> (<em>float</em><em>, </em><em>optional</em>) – see make_cffm_joint_profile</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>call, frequency_profile</strong> – The audio and the final frequency profile.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#measure_horseshoe_bat_calls.simulate_calls.make_call_frequency_profile" title="measure_horseshoe_bat_calls.simulate_calls.make_call_frequency_profile"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_call_frequency_profile()</span></code></a></p>
</div>
<p class="rubric">References</p>
<dl class="simple">
<dt>..1 Thanks to Paul Panzer’s SO example code for forming the main basis for this function.</dt><dd><p><a class="reference external" href="https://stackoverflow.com/questions/47664360/list-of-frequencies-in-time-to-signal-in-python">https://stackoverflow.com/questions/47664360/list-of-frequencies-in-time-to-signal-in-python</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.simulate_calls.make_call_frequency_profile">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.simulate_calls.</code><code class="sig-name descname">make_call_frequency_profile</code><span class="sig-paren">(</span><em class="sig-param">call_properties</em>, <em class="sig-param">fs</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/simulate_calls.html#make_call_frequency_profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.simulate_calls.make_call_frequency_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>call_properties</strong> (<em>dictionary</em>) – With keys : ‘cf’, ‘upfm’, ‘downfm’
Each key has a tuple entry with a frequency and a duration value</p></li>
<li><p><strong>fs</strong> (<em>float</em>) – Sampling rate in Hz</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>final_frequency_profile</strong> – The call frequency profile.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#measure_horseshoe_bat_calls.simulate_calls.make_FM_with_joint" title="measure_horseshoe_bat_calls.simulate_calls.make_FM_with_joint"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_FM_with_joint()</span></code></a></p>
</div>
<p class="rubric">Example</p>
<p>This corresponds to a call with an upfm starting at 50kHz of 5ms
and a CF at 100kHz of 10ms, followed by a downfm ending at 20kHz of 3ms.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cp</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cf&#39;</span><span class="p">:(</span><span class="mi">100000</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">),</span>
<span class="go">          &#39;upfm&#39;:{50000, 0.005},</span>
<span class="go">          &#39;downfm&#39;:{20000, 0.003}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mi">500000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">call_freq_profile</span> <span class="o">=</span> <span class="n">make_call_frequency_profile</span><span class="p">(</span><span class="n">cp</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.simulate_calls.make_FM_with_joint">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.simulate_calls.</code><code class="sig-name descname">make_FM_with_joint</code><span class="sig-paren">(</span><em class="sig-param">fm_properties</em>, <em class="sig-param">cf_start</em>, <em class="sig-param">fs</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/simulate_calls.html#make_FM_with_joint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.simulate_calls.make_FM_with_joint" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs an FM segment with the CF part of the joint attached.
Think of it like a bent gamma ( <span class="math notranslate nohighlight">\(\Gamma\)</span>) with the part coming down
at an angle instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fm_properties</strong> (<em>tuple</em>) – Tuple with format (end_frequency_Hz, fm_duration_seconds)</p></li>
<li><p><strong>cf_start</strong> (<em>float</em>) – CF frequency</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#measure_horseshoe_bat_calls.simulate_calls.make_cffm_joint_profile" title="measure_horseshoe_bat_calls.simulate_calls.make_cffm_joint_profile"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_cffm_joint_profile()</span></code></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>fm_with_joint</strong> – Frequency profile of the FM segment with a bit of the CF part
of the joint sticking out.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.simulate_calls.make_cffm_joint_profile">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.simulate_calls.</code><code class="sig-name descname">make_cffm_joint_profile</code><span class="sig-paren">(</span><em class="sig-param">cf</em>, <em class="sig-param">fm_slope</em>, <em class="sig-param">fs</em>, <em class="sig-param">joint_type='down'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/simulate_calls.html#make_cffm_joint_profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.simulate_calls.make_cffm_joint_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a ‘joint’ in the frequency profile at transition betweent eh CF and FM parts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cf</strong> (<em>float&gt;0</em>) – </p></li>
<li><p><strong>fm_slope</strong> (<em>float&gt;0</em>) – </p></li>
<li><p><strong>fs</strong> (<em>float&gt;0</em>) – </p></li>
<li><p><strong>poly_order</strong> (<em>int</em><em>, </em><em>optional</em>) – Polynomial order to be used by np.polyfit
Defaults to 10</p></li>
<li><p><strong>joint_duration</strong> (<em>float</em><em>, </em><em>optional</em>) – The length of the CF and FM joints.
Default to 0.5 ms</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>freq_profile</strong> – Frequency at each sample point over the 2*joint_duration
length array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.simulate_calls.make_one_CFcall">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.simulate_calls.</code><code class="sig-name descname">make_one_CFcall</code><span class="sig-paren">(</span><em class="sig-param">call_durn</em>, <em class="sig-param">fm_durn</em>, <em class="sig-param">cf_freq</em>, <em class="sig-param">fs</em>, <em class="sig-param">call_shape</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/simulate_calls.html#make_one_CFcall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.simulate_calls.make_one_CFcall" title="Permalink to this definition">¶</a></dt>
<dd><p>A test function used to check how well the segmenting+measurement
functions in the module work.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>call_durn</strong> (<em>float</em>) – </p></li>
<li><p><strong>fm_durn</strong> (<em>float</em>) – </p></li>
<li><p><strong>cf_freq</strong> (<em>float</em>) – </p></li>
<li><p><strong>fs</strong> (<em>float</em>) – </p></li>
<li><p><strong>call_shape</strong> (<em>str</em>) – One of either ‘staplepin’ OR ‘rightangle’</p></li>
<li><p><strong>fm_bandwidth</strong> (<em>float</em><em>, </em><em>optional</em>) – FM bandwidth in Hz.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cfcall</strong> – The synthesised call.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If a call_shape that is not  ‘staplepin’ OR ‘rightangle’ is given</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This is not really the besssst kind of CF call to test the functions on,
but it works okay. The CF call is made by using the poly spline function
and this leads to weird jumps in frequency especially around the CF-FM
junctions. Longish calls with decently long FM parts look fine, but calls
with very short FM parts lead to rippling of the frequency.</p>
</dd></dl>

</div>
<div class="section" id="module-measure_horseshoe_bat_calls.signal_cleaning">
<span id="signal-cleaning"></span><h2>Signal Cleaning<a class="headerlink" href="#module-measure_horseshoe_bat_calls.signal_cleaning" title="Permalink to this headline">¶</a></h2>
<div class="section" id="signal-cleaning-module">
<h3>Signal Cleaning Module<a class="headerlink" href="#signal-cleaning-module" title="Permalink to this headline">¶</a></h3>
<p>This module handles the identification and cleaning of  noise in signals. A ‘noisy’ signal
is one that has spikes in it or sudden variations in a continuous looking
function. Most of these functions are built to detect and handle sudden
spikes in the frequency profile estimates of a sound.</p>
<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.exterpolate_over_anomalies">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">exterpolate_over_anomalies</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">fs</em>, <em class="sig-param">anomalous</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#exterpolate_over_anomalies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.exterpolate_over_anomalies" title="Permalink to this definition">¶</a></dt>
<dd><p>Ex(tra)+(in)ter-polates –&gt; Exterpolates over  anomalous regions. Anomalous
regions are either ‘edge’ or ‘island’ types. The ‘edge’ anomalies are those which are
at the extreme ends of the signal. The ‘island’ anomalies are regions with
non-anomalous regions on the left and right.</p>
<p>An ‘edge’ anomalous region is handled by running a linear regression on the
neighbouring non-anomalous region, and using the slope to extrapolate over
the edge anomaly.</p>
<p>An ‘island’ anomaly is handled by interpolating between the end values of the
neighbouring non-anomalous regions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>np.array</em>) – </p></li>
<li><p><strong>fs</strong> (<em>float&gt;0</em>) – Sampling rate in Hz</p></li>
<li><p><strong>anomalous</strong> (<em>np.array</em>) – Boolean array of same size as X
True indicates an anomalous sample.</p></li>
<li><p><strong>extrap_window</strong> (<em>float&gt;0</em>) – The duration of the extrapolation window in seconds.
Defaults to 0.5*10^-3s</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>smooth_X</strong> – Same size as X, with the anomalous regions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Only extrapolation by linear regression is supported currently. The <cite>extrap_window</cite>
parameter is important especially if there is a high rate of frequency modulation
towards the edges of the sound. When there is a high freq. mod. at the edges it
is better to set the <cite>extrap_window</cite> small. However, setting it too small also
means that the extrapolation may not be as nice anymore.</p>
<p class="rubric">Example</p>
<p><cite>not up to date!!!</cite></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">find_closest_normal_region()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.anomaly_extrapolation">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">anomaly_extrapolation</code><span class="sig-paren">(</span><em class="sig-param">region</em>, <em class="sig-param">X</em>, <em class="sig-param">num_samples</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#anomaly_extrapolation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.anomaly_extrapolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes X values next to the region and fits a linear regression
into the region</p>
<p class="rubric">Notes</p>
<p>This function covers 90% of cases…if there is an anomaly right next
to an edge anomaly with &lt;num_samples distance – of course things will
go whack.</p>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.anomaly_interpolation">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">anomaly_interpolation</code><span class="sig-paren">(</span><em class="sig-param">region</em>, <em class="sig-param">X</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#anomaly_interpolation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.anomaly_interpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolates X values bet</p>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.smooth_over_potholes">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">smooth_over_potholes</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">fs</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#smooth_over_potholes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.smooth_over_potholes" title="Permalink to this definition">¶</a></dt>
<dd><p>A signal can show drastic changes in its value because of measurement errors.
These drastic variations in signal can cause the creation of [potholes](<a class="reference external" href="https://en.wikipedia.org/wiki/Pothole">https://en.wikipedia.org/wiki/Pothole</a>)
(holes in a road). This method tries to ‘level’ out the pothole by re-setting the samples of the
pothole. A linear interpolation is done from the start of a pothole till its end using the closest
non-pothole samples.</p>
<p>A pothole is identified by a region of the signal with drastic changes in slope. A moving window
calculates the slopes between the focal sample and the Nth sample after it to estimate if
the values move gradually or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>np.array</em>) – </p></li>
<li><p><strong>fs</strong> (<em>float&gt;0</em>) – </p></li>
<li><p><strong>max_stepsize</strong> (<em>float&gt;0</em><em>, </em><em>optional</em>) – The maximum absolute difference between adjacent samples.
Defaults to 50.</p></li>
<li><p><strong>pothole_inspection_window</strong> (<em>float&gt;0</em><em>, </em><em>optional</em>) – The length of the moving window that’s used to discover potholes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>pothole_covered</em></p></li>
<li><p><em>pothol</em></p></li>
</ul>
</p>
</dd>
</dl>
<p>-=
.. seealso:: <a class="reference internal" href="#measure_horseshoe_bat_calls.signal_cleaning.identify_pothole_samples" title="measure_horseshoe_bat_calls.signal_cleaning.identify_pothole_samples"><code class="xref py py-func docutils literal notranslate"><span class="pre">identify_pothole_samples()</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.identify_pothole_samples">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">identify_pothole_samples</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">fs</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#identify_pothole_samples"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.identify_pothole_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves a sliding window and checks the values of samples in the sliding window.
If the jump of values between samples is not linearly propotional to the
expected max_stepsize, then it is labelled a pothole sample.</p>
<p>A pothole sample is one which represents a sudden jump in the values - indicating
a noisy tracking of the frequency. The jump in values in a non-noisy signal is expected
to be proportional to the distance between the samples.</p>
<p>For instance, if :</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
</pre></div>
</div>
<p>If the max step size is 2, then because abs(10-2)&gt;2, it causes a pothole to appear on 2.
There is no pothole label on the 2nd index because abs(10-6) is not &gt;4. Because 10 and 6
are two samples apart, the maximum allowed jump in value is max_stepsize*2, which is 4.</p>
<p>For optimal pothole detection the ‘look-ahead’ span of the pothole_inspection_window
should at least the size of the longest expected potholes. Smaller window sizes
will lead to false negatives.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>np.array</em>) – </p></li>
<li><p><strong>fs</strong> (<em>float&gt;0</em>) – </p></li>
<li><p><strong>max_stepsize</strong> (<em>float&gt;0</em>) – The max absolute difference between the values of one sample to the next.</p></li>
<li><p><strong>pothole_inspection_window</strong> (<em>float&gt;0</em><em>, </em><em>optional</em>) – Defaults to 0.25ms</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pothole_candidates</strong> – Boolean array with same size as X. Sample that are True represent pothole candidates.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#measure_horseshoe_bat_calls.signal_cleaning.detect_local_potholes" title="measure_horseshoe_bat_calls.signal_cleaning.detect_local_potholes"><code class="xref py py-func docutils literal notranslate"><span class="pre">detect_local_potholes()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.onepass_identify_potholes">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">onepass_identify_potholes</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">fs</em>, <em class="sig-param">max_stepsize</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#onepass_identify_potholes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.onepass_identify_potholes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.detect_local_potholes">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">detect_local_potholes</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">max_step_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#detect_local_potholes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.detect_local_potholes" title="Permalink to this definition">¶</a></dt>
<dd><p>accepts a 1D array and checks the absolute difference between
the first sample and all other samples.</p>
<p>The samples with difference greater than the linearly expected increase
from max_step_sizes are labelled candidate potholes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>np.array</em>) – </p></li>
<li><p><strong>max_step_size</strong> (<em>float&gt;=0</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>candidate_potholes</strong> – Boolean array of same size as X</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.get_all_spikeish_indices">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">get_all_spikeish_indices</code><span class="sig-paren">(</span><em class="sig-param">regions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#get_all_spikeish_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.get_all_spikeish_indices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.find_non_forbidden_index">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">find_non_forbidden_index</code><span class="sig-paren">(</span><em class="sig-param">candidate</em>, <em class="sig-param">forbidden_indices</em>, <em class="sig-param">search_direction</em>, <em class="sig-param">X</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#find_non_forbidden_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.find_non_forbidden_index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.remove_bursts">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">remove_bursts</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">fs</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#remove_bursts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.remove_bursts" title="Permalink to this definition">¶</a></dt>
<dd><p>Bursts are brief but large jumps in the signal above zero. Even though they satisfy
most of the other conditions of beginning above the noise floor and of
being above 0 value, they still are too short to be relevant signals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>np.array</em>) – The noisy signal to be handled</p></li>
<li><p><strong>fs</strong> (<em>float&gt;0</em>) – Sampling rate in Hz.</p></li>
<li><p><strong>min_element_length</strong> (<em>float&gt;0</em><em>, </em><em>optional</em>) – The minimum length a section of the signal must be to be
kept in seconds. Defaults to 5 inter-sample-intervals.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>X_nonspikey</strong> – Same size as X, and without very short segments.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#measure_horseshoe_bat_calls.signal_cleaning.segments_above_min_duration" title="measure_horseshoe_bat_calls.signal_cleaning.segments_above_min_duration"><code class="xref py py-func docutils literal notranslate"><span class="pre">segments_above_min_duration()</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>An inter-sample-interval is defined as 1/fs</p>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.segments_above_min_duration">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">segments_above_min_duration</code><span class="sig-paren">(</span><em class="sig-param">satisfies_condition</em>, <em class="sig-param">min_samples</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#segments_above_min_duration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.segments_above_min_duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Accepts a boolean array and looks for continuous chunks
that are above a minimum length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>satisfies_condition</strong> (<em>np.array</em>) – Boolean array where samples with True satisfy a condition.</p></li>
<li><p><strong>min_samples</strong> (<em>int &gt;0</em>) – The minimum number of samples a continuous region of True
must be to be kept.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>above_min_duration</strong> – Same size as satisfies_condition, with only the continuous
chunks that are above min_samples.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.suppress_background_noise">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">suppress_background_noise</code><span class="sig-paren">(</span><em class="sig-param">main_signal</em>, <em class="sig-param">input_audio</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#suppress_background_noise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.suppress_background_noise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.suppress_frequency_spikes">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">suppress_frequency_spikes</code><span class="sig-paren">(</span><em class="sig-param">noisy_profile</em>, <em class="sig-param">input_audio</em>, <em class="sig-param">fs</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#suppress_frequency_spikes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.suppress_frequency_spikes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="measure_horseshoe_bat_calls.signal_cleaning.suppress_to_zero">
<code class="sig-prename descclassname">measure_horseshoe_bat_calls.signal_cleaning.</code><code class="sig-name descname">suppress_to_zero</code><span class="sig-paren">(</span><em class="sig-param">target_signal</em>, <em class="sig-param">basis_signal</em>, <em class="sig-param">threshold</em>, <em class="sig-param">mode='below'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/measure_horseshoe_bat_calls/signal_cleaning.html#suppress_to_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#measure_horseshoe_bat_calls.signal_cleaning.suppress_to_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the values of the target signal to zero if the
samples in the basis_signal are $geq$ or $leq$ the threshold</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basis_signal</strong> (<em>target_signal</em><em>,</em>) – </p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – </p></li>
<li><p><strong>mode</strong> (<em>[</em><em>'below'</em><em>, </em><em>'above'</em><em>]</em><em>, </em><em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cleaned_signal</strong> – A copy of the target signal with the values that are below/above the threshold
set to zero</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p># create a basis signal with a ‘weak’ left half and a ‘loud’ right hald
# we want to suppress the we
&gt;&gt;&gt; basis = np.concatenate((np.arange(10), np.arange(100,200)))
&gt;&gt;&gt; target_signal = np.random.normal(0,1,basis.size)
&gt;&gt;&gt; cleaned_target = suppress_to_zero(basis, target_signal, 100, mode=’above’)</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gallery_dir/plot_segmenting_real_sounds.html" class="btn btn-neutral float-right" title="Analysing real recordings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Thejasvi Beleyur

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>